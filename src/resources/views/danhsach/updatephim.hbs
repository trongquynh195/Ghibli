<main>
    <article class="TPost Single">
        <header>
            <h1 class="Title" style="color: rgb(24, 119, 242);">{{movie.title}}</h1>
            <h2 class="SubTitle">{{movie.subtitle}}</h2>
            <div class="Image">
                <div class="tools-box">
                    <div class="tools-box-bookmark normal" data-filmid="5232" style="display: block;"
                        data-added="false"><span class="bookmark-status"></span><span class="bookmark-action"></span>
                    </div>
                </div>
                <figure class="Objf"><img width="180" height="260" src={{movie.poster}}
                        class="attachment-img-mov-md size-img-mov-md wp-post-image"
                        alt="{{movie.title}} - {{movie.subtitle}}"></figure>
                <a href="/phim/{{movie.slug}}/tap"><i class="TpMvPlay AAIco-play_arrow show"></i></a>
                <a class="watch_button_more" title="{{movie.title}} - {{movie.subtitle}}"
                    href="/phim/{{movie.slug}}/tap">Xem phim
                </a>
            </div>
            <div class="Description">{{movie.description}}</div>
        </header>
        <footer class="ClFx">
            <div class="VotesCn">
                <div id="post-ratings-984-loading" class="post-ratings-loading"> <img src="./statics/images/loading.gif"
                        class="post-ratings-image">Đang tải...</div>
            </div>
        </footer>
        <br style="clear:both">
        <div class="MovieInfo TPost SeasonList">
            <div class="season_item">
                {{#each season}}
                <a href="/phim/{{this.slug}}/" title="Phim {{this.name_season}}">{{this.name_season}}</a>
                {{/each}}
            </div>
            <div class="TPostBg Objf"><img class="TPostBg" src={{movie.banner}} alt="Background">
            </div>
    </article>
    <div class="MovieInfo TPost Single">
        <div class="MovieTabNav">
            <div class="Lnk AAIco-description on" data-mvtab="MvTb-Info"> <i class="fa-solid fa-file-invoice"
                    style="margin-right: 0.5rem;"></i>Thông
                tin phim</div>
            <div class="Lnk AAIco-video_call" data-mvtab="MvTb-Trailer"><i class="fa-solid fa-video"
                    style="margin-right: 0.5rem;"></i>Trailer
            </div>
        </div>
        <form action="/anime/{{movie.slug}}/?_method=PUT" method="POST">
            <div class="MvTbCn anmt on" id="MvTb-Info">
                <div class="mvici-left">
                    <ul class="InfoList">

                        <li class="AAIco-adjust latest_eps">
                            <div class="form-group">
                                <label for="Episodes"><strong><i class="fa-solid fa-record-vinyl"></i>Thêm
                                        tập</strong></label>
                                <input type="text" class="form-control" id="Episodes" name="Episodes" value="">
                            </div>
                        </li>

                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Release_Schedule"><strong><i class="fa-solid fa-record-vinyl"></i>Lịch
                                        chiếu:</strong></label>
                                <input type="text" class="form-control" id="Release_Schedule" name="Release_Schedule"
                                    value="{{InfoList.Release_Schedule}}">
                            </div>
                        </li>
                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Status"><strong><i class="fa-solid fa-record-vinyl"></i>Trạng
                                        thái:</strong></label>
                                <input type="text" class="form-control" id="Status" name="Status"
                                    value="{{InfoList.Status}}">
                            </div>
                        </li>
                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Genre"><strong><i class="fa-solid fa-record-vinyl"></i>Thể
                                        loại:</strong></label>
                                <input type="text" class="form-control" id="Genre" name="Genre"
                                    value="{{InfoList.Genre}}">
                            </div>
                        </li>
                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Director"><strong><i class="fa-solid fa-record-vinyl"></i>Đạo
                                        diễn:</strong></label>
                                <input type="text" class="form-control" id="Director" name="Director"
                                    value="{{InfoList.Director}}">
                            </div>
                        </li>
                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Country"><strong><i class="fa-solid fa-record-vinyl"></i>Quốc
                                        gia:</strong></label>
                                <input type="text" class="form-control" id="Country" name="Country"
                                    value="{{InfoList.Country}}">
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="mvici-right">
                    <ul class="InfoList">
                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Duration"><strong><i class="fa-solid fa-record-vinyl"></i>Thời
                                        lượng:</strong></label>
                                <input type="text" class="form-control" id="Duration" name="Duration"
                                    value="{{InfoList.Duration}}">
                            </div>
                        </li>
                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Quality"><strong><i class="fa-solid fa-record-vinyl"></i>Chất
                                        lượng:</strong></label>
                                <input type="text" class="form-control" id="Quality" name="Quality"
                                    value="{{InfoList.Quality}}">
                            </div>
                        </li>
                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Rating"><strong><i
                                            class="fa-solid fa-record-vinyl"></i>Rating:</strong></label>
                                <input type="text" class="form-control" id="Rating" name="Rating"
                                    value="{{InfoList.Rating}}">
                            </div>
                        </li>
                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Language"><strong><i class="fa-solid fa-record-vinyl"></i>Ngôn
                                        ngữ:</strong></label>
                                <input type="text" class="form-control" id="Language" name="Language"
                                    value="{{InfoList.Language}}">
                            </div>
                        </li>
                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Studio"><strong><i
                                            class="fa-solid fa-record-vinyl"></i>Studio:</strong></label>
                                <input type="text" class="form-control" id="Studio" name="Studio"
                                    value="{{InfoList.Studio}}">
                            </div>
                        </li>
                        <li class="AAIco-adjust">
                            <div class="form-group">
                                <label for="Season"><strong><i class="fa-solid fa-record-vinyl"></i>Season: </strong>
                                </label>
                                <input type="text" class="form-control" id="Season" name="Season"
                                    value="{{InfoList.Season.[0]}} - {{InfoList.Season.[1]}}">
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <button type="submit" class="bnt bnt-primary"
                style="left: 50%;position: relative;transform: translateX(-50%);border-radius: 3px;">Cập nhật</button>
        </form>
        <div class="MvTbCn anmt" id="MvTb-Trailer">
            <div class="TPlayerCn BgA">
                <div class="EcBgA">
                    <div class="TPlayer">
                        <div class="TPlayerTb Current" id="Opt1">
                            <iframe width="560" height="315"
                                src="https://www.youtube.com/embed/{{InfoList.Trailer}}?si=U51R5MGVhnPTNxSl"
                                title="YouTube video player" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                allowfullscreen></iframe>
                        </div>
                        <span class="AAIco-lightbulb_outline lgtbx-lnk"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="TPostBg Objf"></div>
    </div>
</main>
<script>
    document.querySelector('.MovieTabNav').addEventListener('click', function (event) {
        console.log(event.target.classList.contains('Lnk'));
        if (event.target.classList.contains('Lnk')) {
            var clickedTabValue = event.target.getAttribute('data-mvtab');

            // Lấy tất cả các tab có class 'Lnk' và loại bỏ lớp 'on'
            var allTabs = document.querySelectorAll('.Lnk');

            allTabs.forEach(function (tab) {
                tab.classList.remove('on');
            });
            console.log(allTabs);
            // Thêm lớp 'on' cho tab được nhấp vào
            event.target.classList.add('on');

            // Ẩn tất cả các nội dung tab
            var allTabContents = document.querySelectorAll('.MvTbCn');
            allTabContents.forEach(function (tabContent) {
                tabContent.classList.remove('on');
            });

            // Hiển thị nội dung của tab được nhấp vào
            var clickedTabContent = document.getElementById(clickedTabValue);
            clickedTabContent.classList.add('on');
        }
    });
    let slugphim = document.querySelector('.Image .watch_button_more');
    let hrefphim = slugphim.getAttribute('href');
    let partsphim = hrefphim.split('/').filter(function (part) {
        return part !== '';
    });
    let lastphim = partsphim[partsphim.length - 2];
    console.log(lastphim);
    var anchorElements = document.querySelectorAll('.season_item a');
    anchorElements.forEach(function (anchorElement) {
        var hrefValue = anchorElement.getAttribute('href');
        var parts = hrefValue.split('/').filter(function (part) {
            return part !== '';
        });
        var lastPart = parts[parts.length - 1];
        if (lastPart === lastphim) {
            anchorElement.classList.add('active');
        }
    });
</script>